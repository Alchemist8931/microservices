<!doctype html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Микросервисы — Панель доступа </title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Material+Symbols+Outlined" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <style>
    :root {
      color-scheme: light;
       --bg: #e8e8e8;
      --surface: #ffffff;
      --accent: #fe7f2d;
      --accent-bg: rgba(254, 127, 45, 0.12);
      --muted: #4b5563;
      --border: #dcdcdc;
      --shadow: 0 18px 40px rgba(17, 17, 17, 0.08);
      --nav-width: 84px;
      --header-height: 80px;
      --text: #151717;
      --frame-gap: clamp(16px, 2vw, 28px);
      --modal-width: 1360px;
    }
    * { box-sizing: border-box; }
    html, body {
      overflow: hidden;
    }
    body {
      margin: 0;
      font-family: "Inter", system-ui, -apple-system, sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      padding: 0 var(--frame-gap) var(--frame-gap);
    }
    .page-frame {
      width: min(calc(var(--nav-width) + var(--modal-width) + var(--frame-gap) * 3), 100%);
      margin: 0 auto;
      padding-top: var(--frame-gap);
      display: grid;
      gap: var(--frame-gap);
    }
    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      min-height: var(--header-height);
      padding: 10px 22px;
      position: relative;
      background: var(--surface);
      border-bottom: 1px solid #e2e8f0;
      border-radius: 18px;
      box-shadow: 0 10px 24px rgba(0,0,0,0.08);
    }
    .brand { display: flex; align-items: center; gap: 20px; }
    .riva-wrap {
      position: relative;
      display: inline-flex;
      align-items: center;
      padding: 10px 0 10px 10px;
      overflow: visible;
      isolation: isolate;
    }
    .dev-badge {
      display: inline-flex;
      align-items: center;
      padding: 10px 16px;
      border-radius: 14px;
      background: var(--accent-bg);
      border: 1px solid var(--accent);
      box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.35), 0 10px 24px rgba(0,0,0,0.06);
      white-space: nowrap;
    }
    .riva-logo {
      position: relative;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: clamp(32px, 5vw, 46px);
      font-weight: 800;
      letter-spacing: 0.12em;
      color: var(--text);
      padding-right: 6px;
      min-width: max-content;
    }
    .riva-text { position: relative; z-index: 2; }
    .dev-text {
      font-size: clamp(18px, 3vw, 22px);
      font-weight: 700;
      letter-spacing: 0.02em;
      color: var(--text);
      line-height: 1.1;
      text-transform: capitalize;
    }
    .riva-logo .orbit {
      --orbit-period: 10s;
      position: absolute;
      top: 50%;
      left: 50%;
      border-radius: 50%;
      --tilt-x-angle: 0deg;
      --tilt-z-angle: 0deg;
      transform: translate(-50%, -50%) rotateX(var(--tilt-x-angle)) rotateZ(var(--tilt-z-angle));
      transform-style: preserve-3d;
      animation: orbit-rotate var(--orbit-period) linear infinite;
      animation-delay: var(--orbit-delay, 0s);
      pointer-events: none;
      z-index: 1;
    }
    .riva-logo .orbit::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 100%;
      transform: translate(-50%, -50%) rotateX(var(--tilt-x-angle)) rotateZ(var(--tilt-z-angle));
      width: var(--planet-size, 2px);
      height: var(--planet-size, 2px);
      border-radius: 50%;
      background: var(--accent);
      animation: planet-rotate var(--orbit-period) linear infinite;
      animation-delay: var(--orbit-delay, 0s);
    }
    .riva-logo .orbit-1 { width: 148px; height: 148px; --planet-size: calc(4px / 3); --orbit-delay: calc(var(--orbit-period) * -0.68); --tilt-x-angle: 8deg; --tilt-z-angle: -12deg; }
    .riva-logo .orbit-2 { width: 156px; height: 156px; --planet-size: calc(8px / 3); --orbit-delay: calc(var(--orbit-period) * -0.03); --tilt-x-angle: -10deg; --tilt-z-angle: 6deg; }
    .riva-logo .orbit-3 { width: 164px; height: 164px; --planet-size: calc(12px / 3); --orbit-delay: calc(var(--orbit-period) * -0.23); --tilt-x-angle: 14deg; --tilt-z-angle: 18deg; }
    .riva-logo .orbit-4 { width: 172px; height: 172px; --planet-size: calc(5px / 3); --orbit-delay: calc(var(--orbit-period) * -0.36); --tilt-x-angle: -6deg; --tilt-z-angle: -16deg; }
    .riva-logo .orbit-5 { width: 180px; height: 180px; --planet-size: calc(6px / 3); --orbit-delay: calc(var(--orbit-period) * -0.72); --tilt-x-angle: 20deg; --tilt-z-angle: -4deg; }
    .riva-logo .orbit-6 { width: 188px; height: 188px; --planet-size: calc(12px / 3); --orbit-delay: calc(var(--orbit-period) * -0.17); --tilt-x-angle: -18deg; --tilt-z-angle: 12deg; }
    .riva-logo .orbit-7 { width: 196px; height: 196px; --planet-size: calc(5px / 3); --orbit-delay: calc(var(--orbit-period) * -0.56); --tilt-x-angle: 16deg; --tilt-z-angle: 22deg; }
    .riva-logo .orbit-8 { width: 204px; height: 204px; --planet-size: calc(6px / 3); --orbit-delay: calc(var(--orbit-period) * -0.50); --tilt-x-angle: -24deg; --tilt-z-angle: -10deg; }
    .riva-logo .orbit-9 { width: 212px; height: 212px; --planet-size: calc(12px / 3); --orbit-delay: calc(var(--orbit-period) * -0.34); --tilt-x-angle: 28deg; --tilt-z-angle: 8deg; }
    .riva-logo .orbit-10 { width: 220px; height: 220px; --planet-size: calc(9px / 3); --orbit-delay: calc(var(--orbit-period) * -0.82); --tilt-x-angle: -30deg; --tilt-z-angle: 18deg; }
    .riva-logo .orbit-11 { width: 228px; height: 228px; --planet-size: calc(6px / 3); --orbit-delay: calc(var(--orbit-period) * -0.22); --tilt-x-angle: 12deg; --tilt-z-angle: -24deg; }
    .riva-logo .orbit-12 { width: 236px; height: 236px; --planet-size: calc(12px / 3); --orbit-delay: calc(var(--orbit-period) * -0.01); --tilt-x-angle: -26deg; --tilt-z-angle: -18deg; }
    .riva-logo .orbit-13 { width: 244px; height: 244px; --planet-size: calc(6px / 3); --orbit-delay: calc(var(--orbit-period) * -0.80); --tilt-x-angle: 18deg; --tilt-z-angle: 26deg; }
    .riva-logo .orbit-14 { width: 252px; height: 252px; --planet-size: calc(10px / 3); --orbit-delay: calc(var(--orbit-period) * -0.34); --tilt-x-angle: -14deg; --tilt-z-angle: 28deg; }
    .riva-logo .orbit-15 { width: 260px; height: 260px; --planet-size: calc(8px / 3); --orbit-delay: calc(var(--orbit-period) * -0.06); --tilt-x-angle: 24deg; --tilt-z-angle: -28deg; }
    .riva-logo .orbit-16 { width: 268px; height: 268px; --planet-size: calc(8px / 3); --orbit-delay: calc(var(--orbit-period) * -0.50); --tilt-x-angle: -32deg; --tilt-z-angle: 14deg; }
    .riva-logo .orbit-17 { width: 276px; height: 276px; --planet-size: calc(11px / 3); --orbit-delay: calc(var(--orbit-period) * -0.96); --tilt-x-angle: 30deg; --tilt-z-angle: -18deg; }
    .riva-logo .orbit-18 { width: 284px; height: 284px; --planet-size: calc(7px / 3); --orbit-delay: calc(var(--orbit-period) * -0.08); --tilt-x-angle: -22deg; --tilt-z-angle: 24deg; }
    .riva-logo .orbit-19 { width: 292px; height: 292px; --planet-size: calc(5px / 3); --orbit-delay: calc(var(--orbit-period) * -0.32); --tilt-x-angle: 20deg; --tilt-z-angle: -32deg; }
    .riva-logo .orbit-20 { width: 300px; height: 300px; --planet-size: calc(8px / 3); --orbit-delay: calc(var(--orbit-period) * -0.97); --tilt-x-angle: -28deg; --tilt-z-angle: 30deg; }
    @keyframes orbit-rotate {
      from { transform: translate(-50%, -50%) rotateX(var(--tilt-x-angle)) rotateZ(var(--tilt-z-angle)) rotateY(0deg); }
      to { transform: translate(-50%, -50%) rotateX(var(--tilt-x-angle)) rotateZ(var(--tilt-z-angle)) rotateY(360deg); }
    }
    @keyframes planet-rotate {
      from { transform: translate(-50%, -50%) rotateX(var(--tilt-x-angle)) rotateZ(var(--tilt-z-angle)) rotateY(0deg); }
      to { transform: translate(-50%, -50%) rotateX(var(--tilt-x-angle)) rotateZ(var(--tilt-z-angle)) rotateY(-360deg); }
    }
    .btn {
      cursor: pointer;
      border: 1px solid #151717;
      border-radius: 12px;
      padding: 12px 16px;
      font-weight: 600;
      color: #fff;
      background: #151717;
      box-shadow: 0 10px 24px rgba(0,0,0,0.08);
      transition: transform 150ms ease, box-shadow 150ms ease, background 150ms ease;
    }
    .btn:hover { transform: translateY(-1px); box-shadow: 0 16px 32px rgba(0,0,0,0.12); background: #1f1f22; }
    main {
      flex: 1;
      display: grid;
      gap: var(--frame-gap);
      padding: 0;
      width: 100%;
    }
    .hero {
      max-width: 980px;
      width: min(96vw, 980px);
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 22px;
      padding: 48px 52px;
      box-shadow: var(--shadow);
      display: grid;
      gap: 22px;
    }
    .hero h1 {
      margin: 0;
      font-size: clamp(28px, 4vw, 42px);
      line-height: 1.1;
    }
    .hero p { margin: 0; color: var(--muted); max-width: 680px; }
    .hero .highlights {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(210px, 1fr));
      gap: 12px;
    }
    .chip {
      border: 1px solid #e5e7eb;
      border-radius: 12px;
      padding: 10px 12px;
      display: inline-flex;
      align-items: center;
      gap: 10px;
      background: #f8fafc;
      color: var(--text);;
    }
    .chip .material-symbols-outlined { font-size: 20px; color: var(--accent); }
    .panel {
      display: none;
      width: min(920px, 96vw);
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 22px;
      box-shadow: var(--shadow);
      padding: 32px;
      gap: 18px;
    }
    .panel.active { display: grid; }
    .panel h2 { margin: 0 0 8px; }
    .auth-tabs {
      display: inline-flex;
      background: #f4f6f8;
      padding: 6px;
      border-radius: 12px;
      border: 1px solid var(--border);
      gap: 6px;
    }
    .auth-tab {
      border: 0;
      border-radius: 10px;
      padding: 10px 14px;
      background: transparent;
      color: var(--muted);
      font-weight: 600;
      cursor: pointer;
      transition: background 150ms ease, color 150ms ease;
    }
    .auth-tab.active { background: var(--surface); color: var(--text); box-shadow: inset 0 -2px 0 var(--accent); }
    .auth-form {
      display: grid;
      gap: 14px;
      margin-top: 12px;
      background: var(--surface);
      padding: 24px;
      border-radius: 16px;
      border: 1px solid var(--border);
    }
    .auth-form .helper { color: var(--muted); margin: 0; }
    .flex-column {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    label {
      font-size: 14px;
      color: #2d2d2d;
    }
    .inputForm {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 12px;
      border-radius: 12px;
      border: 1px solid #d0d7de;
      background: #f8fafc;
      transition: border-color 120ms ease, box-shadow 120ms ease;
    }
    .inputForm:focus-within {
      border-color: var(--accent);
      box-shadow: 0 0 0 3px rgba(254,127,45,0.16);
    }
    .input {
      border: none;
      outline: none;
      width: 100%;
      background: transparent;
      font-size: 15px;
      color: var(--text);
    }
    .input::placeholder { color: #9ca3af; }
    .inputIcon {
      color: #9ca3af;
      font-size: 20px;
    }
    .button-submit {
      margin-top: 8px;
      background: var(--text);
      color: #fff;
      padding: 12px 16px;
      border-radius: 12px;
      border: none;
      cursor: pointer;
      font-weight: 700;
      transition: background 150ms ease, transform 150ms ease;
      box-shadow: 0 10px 24px rgba(0,0,0,0.12);
    }
    .button-submit:hover { background: #1f2937; transform: translateY(-1px); }
    .button-submit:active { transform: translateY(0); }
    .footer-note {
      margin-top: 10px;
      color: var(--muted);
      font-size: 14px;
    }
    nav.app-nav {
      display: none;
      flex-direction: column;
      align-items: center;
      width: var(--nav-width);
      padding: 18px 12px;
      background: var(--surface);
      border-radius: 18px;
      border: 1px solid var(--border);
      box-shadow: var(--shadow);
      gap: 12px;
    }
    body.app-active nav.app-nav { display: flex; }
    nav.app-nav button {
      width: 100%;
      border: 1px solid #e5e7eb;
      border-radius: 14px;
      padding: 12px 10px;
      background: #f8fafc;
      color: var(--text);
      cursor: pointer;
      display: grid;
      gap: 6px;
      justify-items: center;
      transition: border-color 150ms ease, transform 150ms ease, box-shadow 150ms ease;
    }
    nav.app-nav button.active {
      border-color: var(--accent);
      box-shadow: 0 10px 24px rgba(0,0,0,0.08);
      transform: translateY(-1px);
    }
    nav.app-nav button .material-symbols-outlined { color: var(--accent); font-size: 26px; }
    #appContent {
      display: none;
      width: min(var(--modal-width), calc(100vw - var(--nav-width) - var(--frame-gap) * 3));
      background: var(--surface);
      border-radius: 22px;
      border: 1px solid var(--border);
      box-shadow: var(--shadow);
      padding: 28px;
      min-height: 340px;
    }
    body.app-active #appContent { display: block; }
    .content-placeholder {
      color: var(--muted);
      font-size: 16px;
      margin: 0;
    }
    .menu-row {
      display: none;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: 14px;
      margin-bottom: 20px;
    }
    .menu-row.active { display: grid; }
    .menu-card {
      border: 1px solid #e5e7eb;
      border-radius: 14px;
      padding: 12px 14px;
      background: #f8fafc;
      display: flex;
      flex-direction: column;
      gap: 6px;
      cursor: pointer;
      transition: border-color 120ms ease, box-shadow 120ms ease, transform 120ms ease;
    }
    .menu-card:hover {
      border-color: var(--accent);
      box-shadow: 0 10px 24px rgba(0,0,0,0.08);
      transform: translateY(-1px);
    }
    .menu-card .material-symbols-outlined {
      font-size: 24px;
      color: var(--accent);
    }
    .menu-card-title { font-weight: 700; color: var(--text); }
    .menu-card-desc { color: var(--muted); font-size: 14px; margin: 0; }
    .status {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      background: #f4f6f8;
      border: 1px solid #e5e7eb;
      border-radius: 12px;
      padding: 10px 12px;
      font-weight: 600;
      color: var(--text);
      width: fit-content;
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.7);
    }
    .status .dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: var(--accent);
      box-shadow: 0 0 0 6px rgba(45, 121, 243, 0.18);
    }
    .sql-block {
      margin-top: 18px;
      padding: 14px 16px;
      background: #fff;
      border: 1px solid var(--border);
      border-radius: 14px;
      white-space: pre-wrap;
      word-break: break-word;
      font-family: "SFMono-Regular", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      color: #1f2937;
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.7);
    }
    .hidden { display: none !important; }
    body.app-active #hero,
    body.app-active #authPanel,
    body.app-active #sqlSection {
      display: none !important;
    }

    body.app-active .btn#openAuth {
      display: none;
    }
  </style>
</head>
<body>
  <div class="page-frame">
  <header>
    <div class="brand" aria-label="RIVA Development">
      <div class="riva-wrap">
        <div class="riva-logo" aria-hidden="true">
          <span class="riva-text">RIVA</span>
          <div class="orbit orbit-1"></div>
          <div class="orbit orbit-2"></div>
          <div class="orbit orbit-3"></div>
          <div class="orbit orbit-4"></div>
          <div class="orbit orbit-5"></div>
          <div class="orbit orbit-6"></div>
          <div class="orbit orbit-7"></div>
          <div class="orbit orbit-8"></div>
          <div class="orbit orbit-9"></div>
          <div class="orbit orbit-10"></div>
          <div class="orbit orbit-11"></div>
          <div class="orbit orbit-12"></div>
          <div class="orbit orbit-13"></div>
          <div class="orbit orbit-14"></div>
          <div class="orbit orbit-15"></div>
          <div class="orbit orbit-16"></div>
          <div class="orbit orbit-17"></div>
          <div class="orbit orbit-18"></div>
          <div class="orbit orbit-19"></div>
          <div class="orbit orbit-20"></div>
        </div>
      </div>
      <div class="dev-badge">
        <span class="dev-text">Development</span>
      </div>
    </div>
    <button id="openAuth" class="btn">Вход</button>
  </header>

  <main>
    <section id="hero" class="hero">
      <div>
        <p class="chip"><span class="material-symbols-outlined">spark</span> Минимальный стартовый экран</p>
        <h1>Управляйте своими микросервисами и рабочими пространствами</h1>
        <p>Одностраничное приложение с динамической подгрузкой HTML-контента. Авторизуйтесь, чтобы увидеть панель с иконками и переключаться между приложениями без перезагрузки.</p>
      </div>
      <div class="highlights">
        <div class="chip"><span class="material-symbols-outlined">admin_panel_settings</span> Создание администраторов при регистрации</div>
        <div class="chip"><span class="material-symbols-outlined">group</span> Пользователи привязаны к группе администратора</div>
        <div class="chip"><span class="material-symbols-outlined">bolt</span> Динамическая загрузка HTML из репозитория</div>
      </div>
    </section>

    <section id="authPanel" class="panel" aria-live="polite">
      <div style="display:flex; justify-content: space-between; align-items:center; gap:14px;">
        <div>
          <p class="chip"><span class="material-symbols-outlined">lock</span> Авторизация и регистрация</p>
          <h2 id="authTitle">Вход в панель</h2>
          <p class="helper">После успешной авторизации основная страница будет скрыта и появится навигация по микросервисам.</p>
        </div>
        <div class="auth-tabs" role="tablist">
          <button class="auth-tab active" id="tabLogin" role="tab" aria-controls="loginForm">Вход</button>
          <button class="auth-tab" id="tabRegister" role="tab" aria-controls="registerForm">Регистрация</button>
        </div>
      </div>

      <form id="loginForm" class="auth-form">
        <div class="auth-fields">
          <div>
            <div class="flex-column">
              <label for="loginUsername">Логин</label>
            </div>
            <div class="inputForm">
              <span class="inputIcon material-symbols-outlined" aria-hidden="true">mail</span>
              <input id="loginUsername" class="input" name="username" autocomplete="username" placeholder="admin@example.com" required>
            </div>
          </div>
          <div>
            <div class="flex-column">
              <label for="loginPassword">Пароль</label>
            </div>
            <div class="inputForm">
              <span class="inputIcon material-symbols-outlined" aria-hidden="true">lock</span>
              <input id="loginPassword" class="input" name="password" type="password" autocomplete="current-password" placeholder="••••••••" required>
            </div>
          </div>
        </div>
        <p class="helper">В этой форме авторизуются и администраторы, и пользователи их рабочих пространств.</p>
        <button class="button-submit" type="submit">Войти</button>
      </form>

      <form id="registerForm" class="auth-form hidden">
        <div class="auth-fields">
          <div>
            <div class="flex-column">
              <label for="regUsername">Логин</label>
            </div>
            <div class="inputForm">
              <span class="inputIcon material-symbols-outlined" aria-hidden="true">mail</span>
              <input id="regUsername" class="input" name="username" autocomplete="email" placeholder="admin@example.com" required>
            </div>
          </div>
          <div>
            <div class="flex-column">
              <label for="regPassword">Пароль</label>
            </div>
            <div class="inputForm">
              <span class="inputIcon material-symbols-outlined" aria-hidden="true">lock</span>
              <input id="regPassword" class="input" name="password" type="password" autocomplete="new-password" placeholder="••••••••" required>
            </div>
          </div>
          <div>
            <div class="flex-column">
              <label for="regWorkspace">Рабочее пространство</label>
            </div>
            <div class="inputForm">
              <span class="inputIcon material-symbols-outlined" aria-hidden="true">domain</span>
              <input id="regWorkspace" class="input" name="workspace" placeholder="team-space" required>
            </div>
          </div>
        </div>
        <p class="helper">Администратор создаётся при регистрации — все пользователи, добавленные им, будут привязаны к его группе.</p>
        <button class="button-submit" type="submit">Зарегистрировать</button>
      </form>
    </section>

    <section id="sqlSection" class="panel hidden">
      <div style="display:flex; justify-content: space-between; align-items:center;">
        <div>
          <p class="chip"><span class="material-symbols-outlined">database</span> SQL для Supabase</p>
          <h2>Создание таблиц</h2>
          <p class="helper">Скопируйте и выполните в Supabase SQL Editor, чтобы создать базовые таблицы.</p>
        </div>
      </div>
      <div class="sql-block" aria-label="SQL snippet">
create table if not exists workspaces (
  id uuid primary key default gen_random_uuid(),
  name text not null,
  created_at timestamp with time zone default now()
);

create table if not exists users (
  id uuid primary key default gen_random_uuid(),
  email text unique not null,
  password_hash text not null,
  workspace_id uuid references workspaces(id),
  created_at timestamp with time zone default now()
);</div>
    </section>

    <nav class="app-nav" aria-label="Навигация по приложениям">
      <button class="active" data-target="menuMicroservices">
        <span class="material-symbols-outlined">apps</span>
        <span>Микросервисы</span>
      </button>
      <button data-target="menuDevOps">
        <span class="material-symbols-outlined">settings</span>
        <span>DevOps</span>
      </button>
      <button data-target="menuData">
        <span class="material-symbols-outlined">dataset</span>
        <span>Data</span>
      </button>
      <button data-target="menuML">
        <span class="material-symbols-outlined">neurology</span>
        <span>ML</span>
      </button>
    </nav>

    <div id="appContent" aria-live="polite">
      <div id="menuMicroservices" class="menu-row active">
        <div class="menu-card" data-url="modal1.html">
          <span class="material-symbols-outlined">cloud</span>
          <div class="menu-card-title">API Gateway</div>
          <p class="menu-card-desc">Настройка маршрутов, авторизации и ограничений.</p>
        </div>
        <div class="menu-card" data-url="modal2.html">
          <span class="material-symbols-outlined">storage</span>
          <div class="menu-card-title">Storage</div>
          <p class="menu-card-desc">Управление файлами и резервным копированием.</p>
        </div>
        <div class="menu-card" data-url="modal3.html">
          <span class="material-symbols-outlined">monitor_heart</span>
          <div class="menu-card-title">Monitoring</div>
          <p class="menu-card-desc">Метрики, алерты и дашборды.</p>
        </div>
      </div>

      <div id="menuDevOps" class="menu-row">
        <div class="menu-card" data-url="modal4.html">
          <span class="material-symbols-outlined">terminal</span>
          <div class="menu-card-title">CI/CD</div>
          <p class="menu-card-desc">Пайплайны, сборки и релизы.</p>
        </div>
      </div>

      <div id="menuData" class="menu-row">
        <p class="content-placeholder">Здесь появятся инструменты для работы с данными.</p>
      </div>

      <div id="menuML" class="menu-row">
        <p class="content-placeholder">Здесь появятся ML-инструменты.</p>
      </div>
    </div>

  </main>
  </div>

  <script>
    const supabaseUrl = "https://your-project.supabase.co";
    const supabaseKey = "public-anon-key";
    const supabaseClient = window.supabase.createClient(supabaseUrl, supabaseKey);

    const openAuthBtn = document.getElementById('openAuth');
    const hero = document.getElementById('hero');
    const authPanel = document.getElementById('authPanel');
    const appContent = document.getElementById('appContent');
    const sqlSection = document.getElementById('sqlSection');
    const bodyEl = document.body;

    const tabLogin = document.getElementById('tabLogin');
    const tabRegister = document.getElementById('tabRegister');
    const loginForm = document.getElementById('loginForm');
    const registerForm = document.getElementById('registerForm');
    const authTitle = document.getElementById('authTitle');

    const navButtons = document.querySelectorAll('nav.app-nav button');
    const menuRows = document.querySelectorAll('.menu-row');
    const menuCards = document.querySelectorAll('.menu-card');

    function switchTab(tab) {
      if (tab === 'login') {
        tabLogin.classList.add('active');
        tabRegister.classList.remove('active');
        loginForm.classList.remove('hidden');
        registerForm.classList.add('hidden');
        authTitle.textContent = 'Вход в панель';
      } else {
        tabLogin.classList.remove('active');
        tabRegister.classList.add('active');
        loginForm.classList.add('hidden');
        registerForm.classList.remove('hidden');
        authTitle.textContent = 'Регистрация';
      }
    }

    tabLogin.addEventListener('click', () => switchTab('login'));
    tabRegister.addEventListener('click', () => switchTab('register'));

    openAuthBtn.addEventListener('click', () => {
      hero.classList.add('hidden');
      authPanel.classList.remove('hidden');
      sqlSection.classList.remove('hidden');
      appContent.classList.remove('hidden');
      document.querySelector('nav.app-nav').style.display = 'flex';
      bodyEl.classList.add('app-active');
    });

    loginForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      const email = document.getElementById('loginUsername').value;
      const password = document.getElementById('loginPassword').value;
      console.log('Login attempt', { email, password });
      bodyEl.classList.add('app-active');
    });

    registerForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      const email = document.getElementById('regUsername').value;
      const password = document.getElementById('regPassword').value;
      const workspace = document.getElementById('regWorkspace').value;
      console.log('Register', { email, password, workspace });
    });

    menuCards.forEach(card => {
      card.addEventListener('click', async () => {
        const url = card.dataset.url;
        const res = await fetch(url);
        const html = await res.text();
        appContent.innerHTML = html;
      });
    });

    navButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        navButtons.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');

        const targetId = btn.dataset.target;
        menuRows.forEach(row => {
          if (row.id === targetId) row.classList.add('active');
          else row.classList.remove('active');
        });

        const colorMap = {
          menuMicroservices: '#fe7f2d',
          menuDevOps: '#2563eb',
          menuData: '#0f766e',
          menuML: '#8b5cf6'
        };
        updateAccent(colorMap[targetId] || '#fe7f2d');
      });
    });

    function updateAccent(color) {
      document.documentElement.style.setProperty('--accent', color);
      document.documentElement.style.setProperty('--accent-bg', `${hexToRgba(color, 0.12)}`);
    }

    function hexToRgba(hex, alpha) {
      const clean = hex.replace('#', '');
      const bigint = parseInt(clean, 16);
      const r = (bigint >> 16) & 255;
      const g = (bigint >> 8) & 255;
      const b = bigint & 255;
      return `rgba(${r}, ${g}, ${b}, ${alpha})`;
    }
  </script>
</body>
</html>
